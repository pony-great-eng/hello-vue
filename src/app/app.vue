<template>
  <h3 @click="changeName">{{ nameEmoji }}</h3>
  <div @click="username = 'wanghao'">{{ username }}</div>
</template>

<script>
import { ref, reactive, toRefs, onMounted, watch, computed } from 'vue';

export default {
  //ç»„åˆå¼ç»„ä»¶

  setup() {
    const name = ref('å®æµ©ç½‘');

    const user = reactive({
      username: 'ç‹çš“',
    });

    const changeName = () => {
      name.value = 'NINGHAO';
    };
    //const { username } = toRefs(user);

    //ç”Ÿå‘½å‘¨æœŸ
    onMounted(() => {
      console.log('mounted');
    });

    //ç›‘è§†æ•°æ®
    watch(name, (newName, oldName) => {
      console.log(newName, oldName);
    });

    //è®¡ç®—å±æ€§
    const nameEmoji = computed(() => `${name.value}ğŸŒ¤ï¸`);
    return {
      name,
      ...toRefs(user),
      changeName,
      nameEmoji,
    };
  },
  //   data() {
  //     return {
  //       name: 'å®æµ©ç½‘',
  //     };
  //   },

  //   created() {
  //     console.log(this.$data);
  //   },

  //   created() {
  //     const user = {
  //       name: 'å®æµ©ç½‘',
  //     };

  //     const handler = {
  //       get(target, property) {
  //         return target[property];
  //       },

  //       set(target, property, value) {
  //         if (property === 'name') {
  //           if (value.length > 10) {
  //             throw new Error('åå­—å¤ªé•¿äº†');
  //           }
  //         }

  //         return Reflect.set(target, property, value);
  //       },
  //     };

  //     const userProxy = new Proxy(user, handler);

  //     try {
  //       userProxy.name = 'NINGHAO';
  //     } catch (error) {
  //       console.log('é”™è¯¯ï¼š', error.message);
  //     }

  //     console.log(userProxy.name);
  //   },
};
</script>

<style>
@import './styles/app.css';
</style>
